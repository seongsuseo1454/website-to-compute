<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Health Check</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <style>
    body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif; padding:20px }
    button { margin-right: 12px; padding: 8px 14px; }
    #output { margin-top: 16px; padding: 12px; background:#0b1220; color:#d8e1ff; border-radius:8px; white-space:pre-wrap }
  </style>
</head>
<body>
  <button onclick="testAI()">AI 테스트</button>
  <button onclick="testWeather()">날씨 테스트</button>
  <pre id="output">결과가 여기에 표시됩니다.</pre>

  <script>
    const out = (msg) => { document.getElementById('output').textContent = msg; };

    async function testAI() {
      out("AI 호출 중...");
      try {
        const res = await fetch('/api/ai', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt: "헬스체크: 한 줄로 'OK'라고만 답해줘." })
        });
        const data = await res.json();
        out("AI 응답:\n" + JSON.stringify(data, null, 2));
      } catch (e) {
        out("AI 호출 실패:\n" + (e?.stack || e));
      }
    }

    async function testWeather() {
      out("기상청 호출 중...");
      try {
        // 샘플 좌표/시간 (서울) – 실제로는 현재 시각으로 바꾸셔도 됩니다.
        const url = `/api/weather?nx=60&ny=127&date=20250919&time=0600&type=JSON`;
        const res = await fetch(url);
        const data = await res.json();
        out("날씨 응답:\n" + JSON.stringify(data, null, 2));
      } catch (e) {
        out("날씨 호출 실패:\n" + (e?.stack || e));
      }
    }
  </script>
</body>
</html>
