<!doctype html>
<meta charset="utf-8">
<title>Health Check</title>
<button id="ai">AI 테스트</button>
<button id="wx">날씨 테스트</button>
<pre id="out"></pre>
<script>
const out = document.getElementById('out');
document.getElementById('ai').onclick = async () => {
  const r = await fetch('/api/ai', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({prompt:'상태 점검 한 줄'})});
  out.textContent = await r.text();
};
document.getElementById('wx').onclick = async () => {
  const r = await fetch('/api/weather?nx=60&ny=127&date=20250919&time=0600&type=JSON');
  out.textContent = await r.text();
};
</script>
async function testAI() {
  const r = await fetch('/api/ai', {
    method: 'POST',
    headers: { 'Content-Type':'application/json' },
    body: JSON.stringify({ prompt: '테스트: 한 문장으로 자기소개' })
  });
  console.log('AI', await r.json());
}

async function testWeather() {
  // 날짜/시간 안 넘기면 서버가 자동 보정
  const url = `/api/weather?nx=60&ny=127&type=JSON`;
  const r = await fetch(url);
  const j = await r.json();
  console.log('WEATHER', j);
  // 화면에 한 줄로라도 확인
  document.body.insertAdjacentHTML('beforeend',
    `<pre style="white-space:pre-wrap">${JSON.stringify(j).slice(0,1000)}...</pre>`);
}
</script>
